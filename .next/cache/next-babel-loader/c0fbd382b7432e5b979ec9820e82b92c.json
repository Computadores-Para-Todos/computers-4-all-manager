{"ast":null,"code":"import { Model, Op, STRING, ENUM, DATE, INTEGER } from 'sequelize';\nimport { encrypt } from '../utils';\nimport { User, Status, Donation, Donator, Comment } from '.';\n/**\n * Model de usu치rio\n * @exports\n * @class UserModel\n * @augments {Model}\n * @see https://codewithhugo.com/using-es6-classes-for-sequelize-4-models/\n */\n\nexport default class Device extends Model {\n  // Cria inst칙ncia do model\n  static init(sequelize) {\n    return super.init({\n      title: {\n        type: STRING,\n        allowNull: false\n      },\n      type: {\n        type: ENUM('computer', 'display', 'printer'),\n        allowNull: false\n      },\n      serial: INTEGER,\n      collectedAt: DATE\n    }, {\n      sequelize\n    });\n  }\n  /**\n   * Cria relacionamentos\n   * @static\n   * @memberof Device\n   * @returns {void}\n   */\n\n\n  static associate() {\n    // User relation\n    this.belongsTo(User, {\n      as: 'user',\n      onDelete: 'cascade'\n    }); // Status relation\n\n    this.belongsTo(Status, {\n      foreignKey: {\n        allowNull: false\n      },\n      as: 'status',\n      onDelete: 'cascade'\n    }); // Donation relation\n\n    this.belongsTo(Donation, {\n      foreignKey: {\n        allowNull: false\n      },\n      as: 'donation',\n      onDelete: 'cascade'\n    });\n    Donation.Device = Donation.hasMany(Device, {\n      as: 'devices'\n    }); // Donation relation\n\n    this.belongsTo(Donator, {\n      foreignKey: {\n        allowNull: false\n      },\n      as: 'donator',\n      onDelete: 'cascade'\n    });\n    this.hasMany(Comment, {\n      as: 'comments'\n    });\n  }\n\n}","map":{"version":3,"sources":["/home/vinicius/code/computers-4-all-manager/api/src/models/DeviceModel.js"],"names":["Model","Op","STRING","ENUM","DATE","INTEGER","encrypt","User","Status","Donation","Donator","Comment","Device","init","sequelize","title","type","allowNull","serial","collectedAt","associate","belongsTo","as","onDelete","foreignKey","hasMany"],"mappings":"AAAA,SAASA,KAAT,EAAgBC,EAAhB,EAAoBC,MAApB,EAA4BC,IAA5B,EAAkCC,IAAlC,EAAwCC,OAAxC,QAAuD,WAAvD;AACA,SAASC,OAAT,QAAwB,UAAxB;AACA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,QAAvB,EAAiCC,OAAjC,EAA0CC,OAA1C,QAAyD,GAAzD;AAEA;;;;;;;;AAOA,eAAe,MAAMC,MAAN,SAAqBZ,KAArB,CAA2B;AACxC;AACA,SAAOa,IAAP,CAAYC,SAAZ,EAAuB;AACrB,WAAO,MAAMD,IAAN,CACL;AACEE,MAAAA,KAAK,EAAE;AACLC,QAAAA,IAAI,EAAEd,MADD;AAELe,QAAAA,SAAS,EAAE;AAFN,OADT;AAKED,MAAAA,IAAI,EAAE;AACJA,QAAAA,IAAI,EAAEb,IAAI,CAAC,UAAD,EAAa,SAAb,EAAwB,SAAxB,CADN;AAEJc,QAAAA,SAAS,EAAE;AAFP,OALR;AASEC,MAAAA,MAAM,EAAEb,OATV;AAUEc,MAAAA,WAAW,EAAEf;AAVf,KADK,EAaL;AAAEU,MAAAA;AAAF,KAbK,CAAP;AAeD;AAED;;;;;;;;AAMA,SAAOM,SAAP,GAAmB;AACjB;AACA,SAAKC,SAAL,CAAed,IAAf,EAAqB;AACnBe,MAAAA,EAAE,EAAE,MADe;AAEnBC,MAAAA,QAAQ,EAAE;AAFS,KAArB,EAFiB,CAMjB;;AACA,SAAKF,SAAL,CAAeb,MAAf,EAAuB;AACrBgB,MAAAA,UAAU,EAAE;AAAEP,QAAAA,SAAS,EAAE;AAAb,OADS;AAErBK,MAAAA,EAAE,EAAE,QAFiB;AAGrBC,MAAAA,QAAQ,EAAE;AAHW,KAAvB,EAPiB,CAYjB;;AACA,SAAKF,SAAL,CAAeZ,QAAf,EAAyB;AACvBe,MAAAA,UAAU,EAAE;AAAEP,QAAAA,SAAS,EAAE;AAAb,OADW;AAEvBK,MAAAA,EAAE,EAAE,UAFmB;AAGvBC,MAAAA,QAAQ,EAAE;AAHa,KAAzB;AAKAd,IAAAA,QAAQ,CAACG,MAAT,GAAkBH,QAAQ,CAACgB,OAAT,CAAiBb,MAAjB,EAAyB;AAAEU,MAAAA,EAAE,EAAE;AAAN,KAAzB,CAAlB,CAlBiB,CAmBjB;;AACA,SAAKD,SAAL,CAAeX,OAAf,EAAwB;AACtBc,MAAAA,UAAU,EAAE;AAAEP,QAAAA,SAAS,EAAE;AAAb,OADU;AAEtBK,MAAAA,EAAE,EAAE,SAFkB;AAGtBC,MAAAA,QAAQ,EAAE;AAHY,KAAxB;AAMA,SAAKE,OAAL,CAAad,OAAb,EAAsB;AAAEW,MAAAA,EAAE,EAAE;AAAN,KAAtB;AACD;;AArDuC","sourcesContent":["import { Model, Op, STRING, ENUM, DATE, INTEGER } from 'sequelize';\nimport { encrypt } from '../utils';\nimport { User, Status, Donation, Donator, Comment } from '.';\n\n/**\n * Model de usu치rio\n * @exports\n * @class UserModel\n * @augments {Model}\n * @see https://codewithhugo.com/using-es6-classes-for-sequelize-4-models/\n */\nexport default class Device extends Model {\n  // Cria inst칙ncia do model\n  static init(sequelize) {\n    return super.init(\n      {\n        title: {\n          type: STRING,\n          allowNull: false\n        },\n        type: {\n          type: ENUM('computer', 'display', 'printer'),\n          allowNull: false\n        },\n        serial: INTEGER,\n        collectedAt: DATE\n      },\n      { sequelize }\n    );\n  }\n\n  /**\n   * Cria relacionamentos\n   * @static\n   * @memberof Device\n   * @returns {void}\n   */\n  static associate() {\n    // User relation\n    this.belongsTo(User, {\n      as: 'user',\n      onDelete: 'cascade'\n    });\n    // Status relation\n    this.belongsTo(Status, {\n      foreignKey: { allowNull: false },\n      as: 'status',\n      onDelete: 'cascade'\n    });\n    // Donation relation\n    this.belongsTo(Donation, {\n      foreignKey: { allowNull: false },\n      as: 'donation',\n      onDelete: 'cascade'\n    });\n    Donation.Device = Donation.hasMany(Device, { as: 'devices' });\n    // Donation relation\n    this.belongsTo(Donator, {\n      foreignKey: { allowNull: false },\n      as: 'donator',\n      onDelete: 'cascade'\n    });\n\n    this.hasMany(Comment, { as: 'comments' });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}